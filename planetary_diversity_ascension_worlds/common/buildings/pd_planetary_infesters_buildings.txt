### Planetary Infesters
building_pd_planet_infester_1 = {
	base_buildtime = 900
	base_cap_amount = 1
	category = government
	can_be_disabled = no
	upgrades = { "building_pd_planet_infester_2" }

	potential = {
		exists = owner
		owner = {
			is_country_type = default
			has_civic = civic_hive_pd_planetary_infesters
		}
		NOR = {
			is_planet_class = pc_city
			is_planet_class = pc_hive
			is_planet_class = pc_machine
			is_planet_class = pc_relic
		}
		is_artificial = no
	}

	allow = {
		exists = owner
		owner = {
			is_country_type = default
			has_civic = civic_hive_pd_planetary_infesters
		}
	}

	destroy_trigger = {
		OR = {
			is_planet_class = pc_hive	# No double bonuses if player uses other tools to turn it into a Hive world.
			is_planet_class = pc_city
			is_planet_class = pc_machine
			is_planet_class = pc_relic
			NOT = { exists = owner }
			owner = {
				NOT = { has_civic = civic_hive_pd_planetary_infesters }
			}
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 1000
			food = 1000
		}
		upkeep = {
			energy = 10
			food = 10
		}
	}

	planet_modifier = {
		pop_environment_tolerance = 0.2
	}

	on_destroy = {
		pd_aw_back_to_normal_view_effect = yes
	}

	is_essential = yes
}

building_pd_planet_infester_2 = {
	base_buildtime = 900
	can_build = no
	category = government
	can_be_disabled = no
	upgrades = { "building_pd_planet_infester_3" }

	resources = {
		category = planet_buildings
		cost = {
			energy = 2000
			food = 2000
		}
		upkeep = {
			energy = 20
			food = 20
		}
	}

	destroy_trigger = {
		OR = {
			is_planet_class = pc_gaia
			is_planet_class = pc_city
			is_planet_class = pc_hive
			is_planet_class = pc_machine
			NOT = { exists = owner }
			owner = {
				NOT = { has_civic = civic_hive_pd_planetary_infesters }
			}
		}
	}

	allow = {
		has_upgraded_capital = yes
	}

	planet_modifier = {
		pop_environment_tolerance = 0.4
		pop_growth_speed = 0.05
	}

	on_destroy = {
		pd_aw_back_to_normal_view_effect = yes
	}

	is_essential = yes
}

building_pd_planet_infester_3 = {
	base_buildtime = 1800
	category = government
	can_build = no
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no
	position_priority = 0

	destroy_trigger = {
		OR = {
			NOT = {
				is_planet_class = pc_hive
			}
			NOT = { exists = owner }
			owner = {
				NOT = { has_civic = civic_hive_pd_planetary_infesters }
			}
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	planet_modifier = {
		pop_growth_speed = 0.1
		planet_jobs_produces_mult = 0.1
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 2500
			food = 2500
		}
		upkeep = {
			energy = 10
			food = 10
		}
	}

	triggered_desc = {
		text = building_pd_planet_infester_3_effect_desc
		trigger = {
			exists = planet
			planet = {
				NOT = {
					is_planet_class = pc_hive
				}
			}
		}
	}

	on_destroy = {
		change_pc = pc_arid
	}

	is_essential = yes
}

# building_pd_planet_infester_hive = {
# 	base_buildtime = @b2_time
# 	base_cap_amount = 1
# 	category = government
# 	can_demolish = no
# 	can_be_ruined = no
# 	can_be_disabled = no
# 	position_priority = 0
# 	icon = building_pd_planet_infester_3

# 	destroy_trigger = {
# 		OR = {
# 			NOT = {
# 				is_planet_class = pc_hive
# 			}
# 			NOT = { exists = owner }
# 			owner = {
# 				NOT = {
# 					has_civic = civic_hive_pd_planetary_infesters
# 				}
# 			}
# 		}
# 	}

# 	resources = {
# 		category = planet_buildings
# 		cost = {
# 			food = 1500
# 		}
# 		upkeep = {
# 			food = @b4_upkeep
# 			multiplier = value:gaiaseeder_cost_mult
# 		}
# 	}

# 	potential = {
# 		hidden_trigger = {
# 			exists = owner
# 			owner = {
# 				is_country_type = default
# 				has_civic = civic_hive_pd_planetary_infesters
# 			}
# 			is_planet_class = pc_hive
# 			NOR = {
# 				has_building = building_pd_planet_infester_3
# 				has_building_construction = building_pd_planet_infester_3
# 				has_building = building_pd_planet_infester_hive
# 				has_building_construction = building_pd_planet_infester_hive
# 			}
# 		}
# 	}

# 	allow = {
# 		has_upgraded_capital = yes
# 		owner = {
# 			has_civic = civic_hive_pd_planetary_infesters
# 		}
# 	}
# }
