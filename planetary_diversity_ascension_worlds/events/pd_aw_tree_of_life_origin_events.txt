namespace = pdtreeoflife

# PD MegafloraTree Of Life
# This event gives the Origin it's deposits, districts and modifiers at game start
country_event = {
	id = pdtreeoflife.10
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		every_galaxy_planet = { 
			limit = { 
				is_planet_class = pc_pd_megaflora_hive
				is_homeworld = yes 
			} 
			generate_pd_aw_start_deposits_and_blockers = yes 
			change_pc = pc_continental
			set_planet_entity = {
				picture = pc_pd_megaflora_hive
				entity = megaflora_planet_01_entity
			}
		}
		set_graphical_culture = pd_tree_of_life_01
		set_city_graphical_culture = pd_tree_of_life_01
	} 
}

# This event starts the process to make the planets
planet_event = {
	id = pdtreeoflife.20
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		owner = {
			has_origin = origin_pd_aw_tree_of_life
		}
	}

	immediate = {
		if = {
			limit = {
				NOR = {
					has_deposit = d_pd_tree_of_life_colony
					has_deposit = d_pd_tree_of_life_home
					has_deposit = d_pd_tree_of_life_bloomed
					has_deposit = d_pd_tree_of_life_habitat
					has_deposit = d_pd_tree_of_life_ringarc
				}
			}
			add_deposit = d_pd_tree_of_life_colony
			switch = {
				trigger = is_planet_class
				pc_habitat = {
					planet_event = {
						id = pdtreeoflife.21
						days = 2160
					}
					add_modifier = { modifier = pd_tree_of_life_growing days = 2160 }
				}
				pc_ringworld_habitable = {
					planet_event = { id = pdtreeoflife.21 days = 9000 }
					add_modifier = {
						modifier = pd_tree_of_life_growing
						days = 9000
					}
				}
				pc_city = { 
					planet_event = { id = pdtreeoflife.21 days = 9000 }
					add_modifier = {
						modifier = pd_tree_of_life_growing
						days = 9000
					}
				}
				default = {
					planet_event = { id = pdtreeoflife.21 days = 7200 }
					add_modifier = {
						modifier = pd_tree_of_life_growing
						days = 7200
					}
				}
				#remove_modifier = no_pd_lifetree #as the planet transfer events fire before this
			}
		}
	}
}


planet_event = {
	id = pdtreeoflife.21
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		owner = {
			has_origin = origin_pd_aw_tree_of_life
		}
	}

	immediate = {
		remove_deposit = d_pd_tree_of_life_colony
		switch = {
			trigger = is_planet_class
			pc_habitat = {
				add_deposit = d_pd_tree_of_life_habitat
				set_planet_entity = {
					picture = pc_pd_megaflora_hive_habitat
				}
			}
			pc_ringworld_habitable = {
				add_deposit = d_pd_tree_of_life_ringarc
				set_planet_entity = {
					picture = pc_pd_megaflora_hive_ringworld
					entity = plantoid_01_megaflora_hive_ringworld_habitable_01_entity
				}
			}
			pc_city = { 
				add_deposit = d_pd_tree_of_life_ringarc
			}
			default = {
				add_deposit = d_pd_tree_of_life_home
				set_planet_entity = {
					picture = pc_pd_megaflora_hive
					entity = megaflora_planet_01_entity
				}
				add_modifier = {
					modifier = pd_tree_of_life_home
					days = -1
				}
			}
		}
	}
}

# #Tree destroyed (oh no!)
# #silently kill tree
# planet_event = {
# 	id = pdtreeoflife.25
# 	hide_window = yes

# 	is_triggered_only = yes
	
# 	trigger = {
# 		AND = {
# 			owner = { 
# 				NOT = { 
# 					has_origin = origin_pd_aw_tree_of_life 
# 				} 
# 			}
# 			OR = {
# 				has_deposit = d_pd_tree_of_life_colony
# 				has_deposit = d_pd_tree_of_life_home
# 				has_deposit = d_pd_tree_of_life_bloomed
# 				has_deposit = d_pd_tree_of_life_habitat
# 				has_deposit = d_pd_tree_of_life_ringarc
# 			}
# 		}
# 	}

# 	immediate = {
# 		remove_deposit = d_pd_tree_of_life_colony
# 		remove_deposit = d_pd_tree_of_life_home
# 		remove_deposit = d_pd_tree_of_life_bloomed
# 		remove_deposit = d_pd_tree_of_life_habitat
# 		remove_deposit = d_pd_tree_of_life_ringarc
# 		remove_modifier = pd_tree_of_life_bloomed
# 		if = {
# 			limit = {
# 				NOR = {
# 					has_deposit = d_pd_tree_of_life_colony
# 					has_deposit = d_pd_tree_of_life_home
# 					has_deposit = d_pd_tree_of_life_bloomed
# 					has_deposit = d_pd_tree_of_life_habitat
# 					has_deposit = d_pd_tree_of_life_ringarc
# 				}
# 			}
# 			switch = {
# 				trigger = is_planet_class
# 				pc_habitat = {
# 					set_planet_entity = {
# 						picture = pc_habitat
# 					}
# 				}
# 				pc_ringworld_habitable = {
# 					set_planet_entity = {
# 						picture = pc_ringworld_habitable
# 					}
# 					set_graphical_culture = root.owner
# 				}
# 				pc_city = { 
# 				 	add_deposit = d_pd_tree_of_life_ringarc
# 				}
# 				default = {
# 					change_pc = pc_tropical
# 				}
# 			}
# 		}
# 		add_modifier = {
# 			modifier = no_pd_lifetree
# 			days = -1
# 		}
# 	}
# }

# #informatively kill tree
# planet_event = {
# 	id = pdtreeoflife.37
# 	hide_window = yes

# 	is_triggered_only = yes

# 	trigger = {
# 		planet_devastation >= 50
# 		OR = {
# 			has_deposit = d_pd_tree_of_life_1
# 			has_deposit = d_pd_tree_of_life_2
# 			has_deposit = d_pd_tree_of_life_3
# 		}
# 	}
	
# 	immediate = {
# 		remove_deposit = d_pd_tree_of_life_1
# 		remove_deposit = d_pd_tree_of_life_2
# 		remove_deposit = d_pd_tree_of_life_3
# 		remove_deposit = d_tol_sap
# 		remove_modifier = pdmegaflora
# 		if = {
# 			limit = { is_planet_class = pc_megafloraforge }
# 			change_pc = pc_forest
# 			add_deposit = d_pd_tree_of_life_dead
# 		}
# 		if = {
# 			limit = { is_planet_class = pc_megafloracapital }
# 			change_pc = pc_forest
# 			add_deposit = d_pd_tree_of_life_dead
# 		}
# 		if = {
# 			limit = { is_planet_class = pc_megafloratol }
# 			change_pc = pc_forest
# 			add_deposit = d_pd_tree_of_life_dead
# 		}
# 		if = {
# 			limit = { is_planet_class = pc_megaflora }
# 			change_pc = pc_forest
# 			add_deposit = d_pd_tree_of_life_dead
# 		}
# 		if = {
# 			limit = { is_planet_class = pc_megaflorahive }
# 			change_pc = pc_forest
# 			add_deposit = d_pd_tree_of_life_dead
# 		}
# 		if = {
# 			limit = { is_planet_class = pc_megaflorahivetl }
# 			change_pc = pc_wettidallylocked
# 			add_deposit = d_pd_tree_of_life_dead
# 		}
# 		if = {
# 			limit = { is_planet_class = pc_megaflorahive_superhab }
# 			change_pc = pc_superhabitable
# 			add_deposit = d_pd_tree_of_life_dead
# 		}
# 		if = {
# 			limit = { is_planet_class = pc_megaflorahive_cave }
# 			change_pc = pc_karst
# 			add_deposit = d_pd_tree_of_life_dead
# 		}
# 	}

# 	#option = {
# 	#	name = UNFORTUNATE
# 	#	add_modifier = { modifier = no_pd_lifetree }
# 	#}
# }

# #modify the modifier for lacking Tree
# planet_event = {
# 	id = pdtreeoflife.38
# 	hide_window = yes

# 	is_triggered_only = yes
	
# 	trigger = {
# 		NOT = { days_passed < 1 }
# 		OR = {
# 			AND = {
# 				FROM = { has_origin = origin_pd_aw_tree_of_life }
# 				NOR = {
# 					has_deposit = d_pd_tree_of_life_1
# 					has_deposit = d_pd_tree_of_life_2
# 					has_deposit = d_pd_tree_of_life_3
# 				}
# 			}
# 			AND = { 
# 				FROM = { NOT = { has_origin = origin_pd_aw_tree_of_life } }
# 				has_modifier = no_pd_lifetree
# 			}
# 		}
	
# 	}

# 	immediate = {
# 		if = {
# 			limit = {
# 				FROM = { has_origin = origin_pd_aw_tree_of_life }
# 				NOR = {
# 					has_deposit = d_pd_tree_of_life_1
# 					has_deposit = d_pd_tree_of_life_2
# 					has_deposit = d_pd_tree_of_life_3
# 				}
# 			}
# 			add_modifier = { modifier = no_pd_lifetree }
# 		}
# 		if = {
# 			limit = {
# 				FROM = { NOT = { has_origin = origin_pd_aw_tree_of_life } }
# 			}
# 			remove_modifier = no_pd_lifetree
# 		}
# 	}
# }

# #PD Hidden Tree Growth
# planet_event = {
# 	id = pdtreeoflife.39
# 	hide_window = yes
# 	location = root

# 	is_triggered_only = yes

# 	trigger = {
# 		owner = { has_origin = origin_pd_aw_tree_of_life }
# 		NOT = { has_planet_flag = pd_tol1 }
# 		NOT = { has_planet_flag = pd_tol2 }
# 		NOT = { has_planet_flag = pd_tol3 }
# 		NOT = { is_artificial = yes }
# 		NOT = { is_pd_habitat = yes }
# 		NOT = { is_planet_class = pc_ecocity }
# 		NOT = { is_planet_class = pc_corpoarc }
# 		NOT = { is_planet_class = pc_palacearc }
# 		NOT = { is_planet_class = pc_capitalarc }
# 		NOT = { is_planet_class = pc_necropolis }
# 		NOT = { is_planet_class = pc_machine_necropolis }
# 		NOT = { is_planet_class = pc_machinetidallylocked }
# 		NOT = { is_planet_class = pc_necrohive }
# 		NOT = { is_planet_class = pc_relic }
# 		NOT = { is_planet_class = pc_nuked_relic }
# 		NOT = { is_planet_class = pc_milarc_relic }
# 		NOT = { is_planet_class = pc_city }
# 		NOT = { is_planet_class = pc_floating }
# 		NOT = { is_planet_class = pc_pd_scrapyard }
# 		NOT = { is_planet_class = pc_crystal }
# 		NOT = { is_planet_class = pc_technoorganic }
# 		NOT = { is_planet_class = pc_graveyard }
# 		NOT = { is_planet_class = pc_shroud_crucible }
# 		NOT = { is_planet_class = pc_crucible }
# 		NOT = { is_planet_class = pc_clean_crucible }
# 		is_acot_unique_planet_class = no
# 	}

# 	immediate = {
# 		set_planet_flag = pd_tol1	
# 		IF = {
# 			limit = { owner = { NOT = { has_technology = tech_pdtoltech } } }
# 			planet_event = { id = pdtreeoflife.40 days = 5400 random = 5400 }
# 		}
# 		IF = {
# 			limit = { owner = { has_technology = tech_pdtoltech } }
# 			planet_event = { id = pdtreeoflife.40 days = 3600 random = 3600 }
# 		}
# 	}
# }

# #PD Change TOL change to megaflora
# planet_event = {
# 	id = pdtreeoflife.40
# 	title = pdtreeoflife.40.name
# 	desc = pdtreeoflife.40.desc
# 	picture = GFX_evt_baol_devolved
# 	show_sound = event_alien_nature
# 	location = root

# 	is_triggered_only = yes

# 	trigger = {
# 		owner = { has_origin = origin_pd_aw_tree_of_life }
# 		has_planet_flag = pd_tol1
# 		NOT = { is_artificial = yes }
# 		NOT = { is_pd_habitat = yes }
# 		NOT = { is_planet_class = pc_ecocity }
# 		NOT = { is_planet_class = pc_corpoarc }
# 		NOT = { is_planet_class = pc_palacearc }
# 		NOT = { is_planet_class = pc_capitalarc }
# 		NOT = { is_planet_class = pc_necropolis }
# 		NOT = { is_planet_class = pc_machine_necropolis }
# 		NOT = { is_planet_class = pc_machinetidallylocked }
# 		NOT = { is_planet_class = pc_necrohive }
# 		NOT = { is_planet_class = pc_relic }
# 		NOT = { is_planet_class = pc_nuked_relic }
# 		NOT = { is_planet_class = pc_milarc_relic }
# 		NOT = { is_planet_class = pc_city }
# 		NOT = { is_planet_class = pc_floating }
# 		NOT = { is_planet_class = pc_pd_scrapyard }
# 		NOT = { is_planet_class = pc_crystal }
# 		NOT = { is_planet_class = pc_technoorganic }
# 		NOT = { is_planet_class = pc_graveyard }
# 		NOT = { is_planet_class = pc_shroud_crucible }
# 		NOT = { is_planet_class = pc_crucible }
# 		NOT = { is_planet_class = pc_clean_crucible }
# 	}

# 	immediate = {
# 		IF = {
# 			limit = {
# 				is_pd_superhab = no
# 				is_pd_tidally_locked = no
# 				is_pd_cave = no
# 			}
# 			change_pc = pc_megaflorahive
# 		}
# 		IF = {
# 			limit = {
# 				is_pd_tidally_locked = yes
# 			}
# 			change_pc = pc_megaflorahivetl
# 		}
# 		IF = {
# 			limit = {
# 				is_pd_superhab = yes
# 			}
# 			change_pc = pc_megaflorahive_superhab
# 		}
# 		IF = {
# 			limit = {
# 				is_pd_cave = yes
# 			}
# 			change_pc = pc_megaflorahive_cave
# 		}
# 		pd_remove_special_deposits_modifiers = yes
# 		remove_planet_flag = pd_tol1
# 		set_planet_flag = pd_tol2
# 		add_modifier = { modifier = pdmegaflora }
# 		remove_deposit = d_pd_tree_of_life_1
# 		add_deposit = d_pd_tree_of_life_2
# 		IF = {
# 			limit = { owner = { NOT = { has_technology = tech_pdtoltech } } }
# 			planet_event = { id = pdtreeoflife.41 days = 18000 random = 18000 }
# 		}
# 		IF = {
# 			limit = { owner = { has_technology = tech_pdtoltech } }
# 			planet_event = { id = pdtreeoflife.41 days = 9000 random = 9000 }
# 		}
# 	}

# 	option = {
# 		name = pdtreeoflife.40.a
# 	}
# }

# #PD Change TOL change to megaflora TOL
# planet_event = {
# 	id = pdtreeoflife.41
# 	title = pdtreeoflife.41.name
# 	desc = pdtreeoflife.41.desc
# 	picture = GFX_evt_baol_devolved
# 	show_sound = event_alien_nature
# 	location = root

# 	is_triggered_only = yes

# 	trigger = {
# 		owner = { has_origin = origin_pd_aw_tree_of_life }
# 		has_planet_flag = pd_tol2
# 		NOT = { is_artificial = yes }
# 		NOT = { is_pd_habitat = yes }
# 		NOT = { is_planet_class = pc_ecocity }
# 		NOT = { is_planet_class = pc_corpoarc }
# 		NOT = { is_planet_class = pc_palacearc }
# 		NOT = { is_planet_class = pc_capitalarc }
# 		NOT = { is_planet_class = pc_necropolis }
# 		NOT = { is_planet_class = pc_machine_necropolis }
# 		NOT = { is_planet_class = pc_machinetidallylocked }
# 		NOT = { is_planet_class = pc_necrohive }
# 		NOT = { is_planet_class = pc_relic }
# 		NOT = { is_planet_class = pc_nuked_relic }
# 		NOT = { is_planet_class = pc_milarc_relic }
# 		NOT = { is_planet_class = pc_city }
# 		NOT = { is_planet_class = pc_megaflorahivetl }
# 		NOT = { is_planet_class = pc_megaflorahive_superhab }
# 		is_acot_unique_planet_class = no
# 	}

# 	immediate = {
# 		change_pc = pc_megafloratol
# 		remove_planet_flag = pd_tol2
# 		set_planet_flag = pd_tol3
# 		add_deposit = d_tol_sap
# 		remove_deposit = d_pd_tree_of_life_2
# 		add_deposit = d_pd_tree_of_life_3
# 		remove_modifier = bleak_planet
# 		remove_modifier = irradiated_planet
# 		remove_modifier = hazardous_weather
# 		remove_modifier = dangerous_wildlife
# 		remove_modifier = wild_storms
# 	}

# 	option = {
# 		name = pdtreeoflife.41.a
# 	}
# }