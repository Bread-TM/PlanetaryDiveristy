namespace = atw_engine

event = {
	id = atw_engine.01
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		# Set the MOD's global flag
		set_global_flag = all_these_worlds_gd
		# Spawn Aldebaran (Deneb's replacement) if enabled with correct Sol initializer
		random_system = {
			limit = { has_star_flag = "aldebaran_enabled" }
			random_system = {
				limit = { has_star_flag = "pollux" }
				spawn_system = {
					min_distance = 10
					max_distance = 10
					max_jumps = 2
					initializer = "une_aldebaran_system"
				}
			}
			random_system = {
				limit = { 
					AND = {
						has_star_flag = "aldebaran_system"
						has_star_flag = "empire_home_system"
					}
				}
				process_spawned_system = yes
			}
		}
		every_galaxy_planet = {
		
			# Set Gas Giant moon's flag
			if = {
				limit = { is_gas_giant = yes has_moon = yes }
				every_moon = { set_planet_flag = "gas_giant_moon" }
			}
			## Convert unintended random habitables to an uninhabitable class
			if = {				
				limit = {
					AND = {
						is_colonizable = yes
						NOR = { 
							has_planet_flag = "planet_converted"
							is_untouchable_planet = yes
							exists = owner
							is_planet_class = pc_ringworld_habitable
							is_planet_class = pc_habitat
						}
					}
				}
				random_list = {
					1 = {
						change_pc = pc_barren
						#reroll_planet_modifiers	= yes
					}
					1 = {
						change_pc = pc_toxic
						#reroll_planet_modifiers	= yes
					}
				}						
			}
			# Convert uninhabitable worlds to Placeholder classes in edited systems and clear standard deposits
			if = {
				limit = { 
					solar_system = { has_star_flag = "atw_edited" }
					uninhabitable_regular_planet = yes
					NOT = { has_planet_flag = "scripted_class" }
					NOT = { has_planet_flag = "planet_converted" }
				}
				clear_deposits = yes
				random_list = {
					0 = {
						change_pc = ph_dwarf
						modifier  = { add = 1  planet_size < 12 }
					}
					0 = {
						change_pc = ph_terran
						modifier  = { add = 1  planet_size > 11 planet_size < 24 }
					}
					0 = {
						change_pc = ph_super_terran
						modifier  = { add = 1  planet_size > 23 }
					}
				}
			}
			if = {
				limit = { 
					solar_system = { has_star_flag = "atw_edited" }
					is_gas_giant = yes
					NOT = { has_planet_flag = "scripted_class" }
					NOT = { has_planet_flag = "planet_converted" }
				}
				clear_deposits = yes
				random_list = {
					0 = {
						change_pc = ph_neptunian
						modifier  = { add = 1  planet_size < 28 }
					}
					0 = {
						change_pc = ph_jovian
						modifier  = { add = 1  planet_size > 27 planet_size < 40 }
					}
					0 = {
						change_pc = ph_super_jovian
						modifier  = { add = 1  planet_size > 39 }
					}
				}
			}
			# Spawn Temperature modifier (requires existing temperature flag)
			if = {
				limit = { NOR = { has_planet_flag = "temperature_spawned" is_moon = yes } }
				spawn_temperature_zone_modifier = yes # Also clears vanilla modifiers
			}
			# Generate primitives and planet modifiers
			if = {
				limit = { 
					solar_system = { has_star_flag = "primitive_system" }
					OR = {
						has_planet_flag = "eco_temp_primitives"
						has_planet_flag = "eco_cold_primitives"
						has_planet_flag = "eco_hot_primitives"
					}
				}
				planet_event = { id = atw_engine.11 }
			}
			# Convert a percentage of uncolonized habitable worlds into different Terrestrial, Sub-terrestrial or Oceanic classes
			if = {
				limit = {
					OR = {
						is_planet_class = pc_desert
						is_planet_class = pc_tropical
						is_planet_class = pc_arid
						is_planet_class = pc_continental
						is_planet_class = pc_ocean
						is_planet_class = pc_tundra
						is_planet_class = pc_arctic
						is_planet_class = pc_alpine
						is_planet_class = pc_savannah
					}
					NOT = { has_owner = yes }
					NOT = { has_planet_flag = "planet_converted" }
					has_planet_flag = "temperature_spawned"
				}
				convert_habitable_class = yes
				spawn_planet_deposits = yes
				#Spawn extra Planet modifiers
				roll_extra_planet_modifiers = yes
			}

			# Spawn modifiers on owned planets and update the environment portraits
			if = {
				limit = {
					OR = {
						is_planet_class = pc_desert
						is_planet_class = pc_tropical
						is_planet_class = pc_arid
						is_planet_class = pc_continental
						is_planet_class = pc_ocean
						is_planet_class = pc_tundra
						is_planet_class = pc_arctic
						is_planet_class = pc_alpine
						is_planet_class = pc_savannah		
						is_planet_class = pc_gaia
						is_planet_class = pc_nuked
						is_planet_class = pc_panpelagic
					}
					OR = {
						has_planet_flag = "planet_unity"
						is_homeworld = yes
						has_owner = yes
					}					
					NOT = { has_planet_flag = "modifiers_spawned" }
					NOT = { has_planet_flag = "planet_converted" }
				}
				convert_homeworld = yes
			}
			# Spawn uncolonized Tomb world modifiers
			if = {
				limit = { 
					is_planet_class = pc_nuked
					NOT = { has_owner = yes }
					NOT = { has_planet_flag = "planet_converted" }
				}
				add_modifier = {
					modifier = "atmosphere-toxic"
					days = -1
				}
				add_modifier = {
					modifier = "biosphere-barren"
					days = -1
				}
				random_list = {
					5 = {
						add_modifier = {
							modifier = "hydrosphere-water_abundant"
							days = -1
						}
						modifier = { factor = 0.00 has_modifier = "temperature-freezing" }
					}
					0 = {
						add_modifier = {
							modifier = "hydrosphere-ammonia_abundant"
							days = -1
						}
						modifier = { add = 10 has_modifier = "temperature-cold" }
						modifier = { add = 1000 has_modifier = "temperature-freezing" }
					}
				}
				spawn_gravity_modifier = yes
				change_pc = orbit_nuked
				#Spawn extra Planet modifiers
				roll_extra_planet_modifiers = yes
				set_planet_flag = "modifiers_spawned"
				spawn_planet_deposits = yes
				set_planet_flag = "planet_converted"
			}
			# Spawn uncolonized Gaia world modifiers
			if = {
				limit = { 
					is_planet_class = pc_gaia
					NOT = { has_owner = yes }
					NOT = { has_planet_flag = "planet_converted" }
				}
				add_modifier = {
					modifier = "atmosphere-optimal"
					days = -1
				}
				add_modifier = {
					modifier = "biosphere-dense"
					days = -1
				}
				add_modifier = {
					modifier = "hydrosphere-water_abundant"
					days = -1
				}
				add_modifier = {
					modifier = "standard_gravity"
					days = -1
				}
				change_pc = orbit_chlorogaian
				set_planet_flag = "modifiers_spawned"
				spawn_planet_deposits = yes
				roll_extra_positive_planet_modifiers = yes
				set_planet_flag = "planet_converted"
			}
			
			# Move aquatic species' capitals underwater

			if = {
				limit = { is_homeworld = yes is_planet_class = "pc_ocean" owner = { has_trait = "trait_aquatic" } }
				set_planet_entity = { picture = pc_aquatic_uw }
			}
			if = {
				limit = { is_homeworld = yes is_planet_class = "pc_desert" owner = { has_trait = "trait_aquatic" } }
				set_planet_entity = { picture = pc_aquatichot_uw }
			}
			if = {
				limit = { is_homeworld = yes is_planet_class = "pc_arctic" owner = { has_trait = "trait_aquatic" } }
				set_planet_entity = { picture = pc_aquaticcold_uw }
			}
			
			
		}

		every_galaxy_planet = {
			# CONVERT THE PLACEHOLDERS INTO UNINHABITABLES AND RE-BALANCE DEPOSITS INCLUDING STARS AND ASTEROIDS

			# Stars
			if = {
				limit = {
					is_star = yes
					OR = {
						has_standard_orbital_deposit = yes
						has_deposit = no
					}
					NOT = { has_planet_flag = "planet_converted" }
					NOT = { solar_system = { has_star_flag = "custom_deposits" } }
				}
				clear_deposits = yes
				spawn_star_features = yes
			}
			# Asteroids
			if = { 			
				limit = {
					is_asteroid = yes
					NOT = { has_planet_flag = "planet_converted" }
					NOT = { solar_system = { has_star_flag = "custom_deposits" } }
				}
				adjust_asteroid_size = yes
				if = {
					limit = { OR = { has_standard_orbital_deposit = yes has_deposit = no } NOT = { has_planet_flag = "planet_converted" } NOT = { solar_system = { has_star_flag = "custom_deposits" } } NOT = { solar_system = { has_star_flag = "empire_home_system" } } }
					clear_deposits = yes
					spawn_asteroid_features = yes
				}			
			}
			# Super-giants
			if = {
				limit = { is_planet_class = ph_super_jovian }
				change_pc = orbit_super_giant
				set_planet_flag = "planet_converted"
				if = {
					limit = { OR = { has_standard_orbital_deposit = yes has_deposit = no } }
					clear_deposits = yes
					spawn_giant_features = yes
				}
			}
			# Remaining Giants
			if = {
				limit = { 
					OR = {
						is_planet_class = ph_jovian
						is_planet_class = ph_neptunian
					}
				}
				convert_ph_giant = yes
				set_planet_flag = "planet_converted"
				if = { 
					limit = { OR = { has_standard_orbital_deposit = yes has_deposit = no } }
					clear_deposits = yes
					spawn_giant_features = yes
				}
			}
			# Rocky worlds
			# Convert special cases to Tidally-locked classes
			if = {
				limit = { 
					OR = { 
						has_planet_flag = "warm_eco_zone"
						has_planet_flag = "temperate_eco_zone"
						has_planet_flag = "cool_eco_zone"
					}
					has_planet_flag = "locked"
					NOT = { has_planet_flag = "planet_converted" }
					NOT = { solar_system = { has_star_flag = "empire_home_system" } }
				}
				random_list = {
					65 = {
						#do nothing, proceed as uninhabitable
					}
					35 = {
						roll_tidally_locked_twilight = yes
						modifier = { factor = 0.50 solar_system = { any_system_planet = { is_planet_class = "orbit_geotidal_twilight" }}}
						modifier = { factor = 0.50 solar_system = { any_system_planet = { is_planet_class = "orbit_geotidal_biolumen" }}}
						modifier = { factor = 0.50 solar_system = { any_system_planet = { is_planet_class = "orbit_geotidal_eyeball" }}}
					}
				}			
			}
			if = {
				limit = { 
					has_planet_flag = "hot_zone"
					has_planet_flag = "locked"
					NOT = { has_planet_flag = "planet_converted" }
					NOT = { solar_system = { has_star_flag = "empire_home_system" } }
				}			
				random_list = {
					65 = {
						#do nothing, proceed as uninhabitable
					}
					35 = {
						roll_tidally_locked_darkside = yes
						modifier = { factor = 0.50 solar_system = { any_system_planet = { is_planet_class = "orbit_geotidal_twilight" }}}
						modifier = { factor = 0.50 solar_system = { any_system_planet = { is_planet_class = "orbit_geotidal_biolumen" }}}
						modifier = { factor = 0.50 solar_system = { any_system_planet = { is_planet_class = "orbit_geotidal_eyeball" }}}
					}
				}
			}
			if = {
				limit = { 
					has_planet_flag = "cold_zone"
					has_planet_flag = "locked"
					NOT = { has_planet_flag = "planet_converted" }
					NOT = { solar_system = { has_star_flag = "empire_home_system" } }
				}			
				random_list = {
					65 = {
						#do nothing, proceed as uninhabitable
					}
					35 = {
						roll_tidally_locked_eyeball = yes
						modifier = { factor = 0.50 solar_system = { any_system_planet = { is_planet_class = "orbit_geotidal_twilight" }}}
						modifier = { factor = 0.50 solar_system = { any_system_planet = { is_planet_class = "orbit_geotidal_biolumen" }}}
						modifier = { factor = 0.50 solar_system = { any_system_planet = { is_planet_class = "orbit_geotidal_eyeball" }}}
					}
				}
			}
			# Convert other special cases to specific uninhabitable classes
			if = {
				limit = {
					has_planet_flag = "water_panthalassic"
					NOT = { has_planet_flag = "planet_converted" }
				}
				roll_water_panthalassic = yes
			}
			# Convert some rocky worlds into Marginals, Sub-marginals and Primordials, based on temperature zone and other conditions
			if = {
				limit = {
					NOT = { has_planet_flag = "planet_converted" }
					NOT = { solar_system = { has_star_flag = "empire_home_system" } }
					OR = { 
						has_planet_flag = "hot_zone"
						has_planet_flag = "warm_eco_zone"
						has_planet_flag = "temperate_eco_zone"
						has_planet_flag = "cool_eco_zone"
						has_planet_flag = "cold_zone"
					}
				}
				random_list = {
					66 = {
						# do nothing
					}
					0 = {
						roll_hadean = yes
						set_planet_flag = "marginal_world"
						modifier = { add = 1 has_planet_flag = "hot_zone" }
						modifier = { add = 1 has_planet_flag = "warm_eco_zone" }
						modifier = { add = 1 has_planet_flag = "temperate_eco_zone" }
						modifier = { add = 1 has_planet_flag = "cool_eco_zone" }
						modifier = { add = 1 has_planet_flag = "cold_zone" }
						modifier = { factor = 0.00 planet_size < 12 }
						modifier = { factor = 2.00 planet_size > 17 planet_size < 23 }
						modifier = { factor = 1.50 planet_size > 14 planet_size < 20 is_moon = yes }
						modifier = { factor = 0.33 solar_system = { any_system_planet = { has_planet_flag = "marginal_world" }}}
						modifier = { factor = 0.00 solar_system = { any_system_planet = { is_planet_class = orbit_hadean }}}
					}
					0 = {
						roll_anthracean = yes
						set_planet_flag = "marginal_world"
						modifier = { add = 0 has_planet_flag = "hot_zone" }
						modifier = { add = 0 has_planet_flag = "warm_eco_zone" }
						modifier = { add = 0 has_planet_flag = "temperate_eco_zone" }
						modifier = { add = 0 has_planet_flag = "cool_eco_zone" }
						modifier = { add = 2 has_planet_flag = "cold_zone" }
						modifier = { factor = 0.00 planet_size < 12 }
						modifier = { factor = 2.00 planet_size > 17 planet_size < 23 }
						modifier = { factor = 1.50 planet_size > 14 planet_size < 20 is_moon = yes }
						modifier = { factor = 0.33 solar_system = { any_system_planet = { has_planet_flag = "marginal_world" }}}
						modifier = { factor = 0.00 solar_system = { any_system_planet = { is_planet_class = orbit_anthracean }}}
					}
					0 = {
						roll_archean = yes
						set_planet_flag = "marginal_world"
						modifier = { add = 0 has_planet_flag = "hot_zone" }
						modifier = { add = 1 has_planet_flag = "warm_eco_zone" }
						modifier = { add = 2 has_planet_flag = "temperate_eco_zone" }
						modifier = { add = 1 has_planet_flag = "cool_eco_zone" }
						modifier = { add = 0 has_planet_flag = "cold_zone" }
						modifier = { factor = 0.00 planet_size < 12 }
						modifier = { factor = 2.00 planet_size > 17 planet_size < 23 }
						modifier = { factor = 1.50 planet_size > 14 planet_size < 20 is_moon = yes }
						modifier = { factor = 0.33 solar_system = { any_system_planet = { has_planet_flag = "marginal_world" }}}
						modifier = { factor = 0.00 solar_system = { any_system_planet = { is_planet_class = orbit_archean }}}
						modifier = { factor = 1.50 has_ring = yes }
					}
					0 = {
						roll_protogenian = yes
						set_planet_flag = "marginal_world"
						modifier = { add = 0 has_planet_flag = "hot_zone" }
						modifier = { add = 1 has_planet_flag = "warm_eco_zone" }
						modifier = { add = 2 has_planet_flag = "temperate_eco_zone" }
						modifier = { add = 1 has_planet_flag = "cool_eco_zone" }
						modifier = { add = 0 has_planet_flag = "cold_zone" }
						modifier = { factor = 0.00 planet_size < 12 }
						modifier = { factor = 2.00 planet_size > 17 planet_size < 23 }
						modifier = { factor = 1.50 planet_size > 14 planet_size < 20 is_moon = yes }
						modifier = { factor = 0.33 solar_system = { any_system_planet = { has_planet_flag = "marginal_world" }}}
						modifier = { factor = 0.00 solar_system = { any_system_planet = { is_planet_class = orbit_protogenian }}}
						modifier = { factor = 1.50 has_moon = yes }
					}
					0 = {
						roll_karsticos = yes
						set_planet_flag = "marginal_world"
						modifier = { add = 0 has_planet_flag = "hot_zone" }
						modifier = { add = 1 has_planet_flag = "warm_eco_zone" }
						modifier = { add = 2 has_planet_flag = "temperate_eco_zone" }
						modifier = { add = 1 has_planet_flag = "cool_eco_zone" }
						modifier = { add = 0 has_planet_flag = "cold_zone" }
						modifier = { factor = 0.00 planet_size < 12 }
						modifier = { factor = 2.00 planet_size > 17 planet_size < 23 }
						modifier = { factor = 1.50 planet_size > 14 planet_size < 20 is_moon = yes }
						modifier = { factor = 0.33 solar_system = { any_system_planet = { has_planet_flag = "marginal_world" }}}
						modifier = { factor = 0.00 solar_system = { any_system_planet = { is_planet_class = orbit_karsticos }}}
					}
					0 = {
						roll_stepicos = yes
						set_planet_flag = "marginal_world"
						modifier = { add = 0 has_planet_flag = "hot_zone" }
						modifier = { add = 0 has_planet_flag = "warm_eco_zone" }
						modifier = { add = 1 has_planet_flag = "temperate_eco_zone" }
						modifier = { add = 2 has_planet_flag = "cool_eco_zone" }
						modifier = { add = 1 has_planet_flag = "cold_zone" }
						modifier = { factor = 0.00 planet_size < 12 }
						modifier = { factor = 2.00 planet_size > 17 planet_size < 23 }
						modifier = { factor = 1.50 planet_size > 14 planet_size < 20 is_moon = yes }
						modifier = { factor = 0.33 solar_system = { any_system_planet = { has_planet_flag = "marginal_world" }}}
						modifier = { factor = 0.00 solar_system = { any_system_planet = { is_planet_class = orbit_stepicos }}}
					}
					0 = {
						roll_agonos = yes
						set_planet_flag = "marginal_world"
						modifier = { add = 1 has_planet_flag = "hot_zone" }
						modifier = { add = 2 has_planet_flag = "warm_eco_zone" }
						modifier = { add = 1 has_planet_flag = "temperate_eco_zone" }
						modifier = { add = 0 has_planet_flag = "cool_eco_zone" }
						modifier = { add = 0 has_planet_flag = "cold_zone" }
						modifier = { factor = 0.00 planet_size < 12 }
						modifier = { factor = 2.00 planet_size > 17 planet_size < 23 }
						modifier = { factor = 1.50 planet_size > 14 planet_size < 20 is_moon = yes }
						modifier = { factor = 0.33 solar_system = { any_system_planet = { has_planet_flag = "marginal_world" }}}
						modifier = { factor = 0.00 solar_system = { any_system_planet = { is_planet_class = orbit_agonos }}}
					}
					0 = {
						roll_almyros = yes
						set_planet_flag = "marginal_world"
						modifier = { add = 2 has_planet_flag = "hot_zone" }
						modifier = { add = 1 has_planet_flag = "warm_eco_zone" }
						modifier = { add = 0 has_planet_flag = "temperate_eco_zone" }
						modifier = { add = 0 has_planet_flag = "cool_eco_zone" }
						modifier = { add = 0 has_planet_flag = "cold_zone" }
						modifier = { factor = 0.00 planet_size < 12 }
						modifier = { factor = 2.00 planet_size > 17 planet_size < 23 }
						modifier = { factor = 1.50 planet_size > 14 planet_size < 20 is_moon = yes }
						modifier = { factor = 0.33 solar_system = { any_system_planet = { has_planet_flag = "marginal_world" }}}
						modifier = { factor = 0.00 solar_system = { any_system_planet = { is_planet_class = orbit_almyros }}}
					}
					0 = {
						roll_elos = yes
						set_planet_flag = "marginal_world"
						modifier = { add = 0 has_planet_flag = "hot_zone" }
						modifier = { add = 1 has_planet_flag = "warm_eco_zone" }
						modifier = { add = 2 has_planet_flag = "temperate_eco_zone" }
						modifier = { add = 1 has_planet_flag = "cool_eco_zone" }
						modifier = { add = 0 has_planet_flag = "cold_zone" }
						modifier = { factor = 0.00 planet_size < 12 }
						modifier = { factor = 2.00 planet_size > 17 planet_size < 23 }
						modifier = { factor = 1.50 planet_size > 14 planet_size < 20 is_moon = yes }
						modifier = { factor = 0.33 solar_system = { any_system_planet = { has_planet_flag = "marginal_world" }}}
						modifier = { factor = 0.00 solar_system = { any_system_planet = { is_planet_class = orbit_elos }}}
					}
					0 = {
						roll_hydrocarbonal = yes
						set_planet_flag = "marginal_world"
						modifier = { add = 0 has_planet_flag = "hot_zone" }
						modifier = { add = 0 has_planet_flag = "warm_eco_zone" }
						modifier = { add = 0 has_planet_flag = "temperate_eco_zone" }
						modifier = { add = 0 has_planet_flag = "cool_eco_zone" }
						modifier = { add = 2 has_planet_flag = "cold_zone" }
						modifier = { factor = 0.00 planet_size < 12 }
						modifier = { factor = 2.00 planet_size > 17 planet_size < 23 }
						modifier = { factor = 1.50 planet_size > 14 planet_size < 20 is_moon = yes }
						modifier = { factor = 0.33 solar_system = { any_system_planet = { has_planet_flag = "marginal_world" }}}
						modifier = { factor = 0.00 solar_system = { any_system_planet = { is_planet_class = orbit_hydrocarbonal }}}
					}
					0 = {
						roll_sulfur = yes
						set_planet_flag = "marginal_world"
						modifier = { add = 2 has_planet_flag = "hot_zone" }
						modifier = { add = 0 has_planet_flag = "warm_eco_zone" }
						modifier = { add = 0 has_planet_flag = "temperate_eco_zone" }
						modifier = { add = 0 has_planet_flag = "cool_eco_zone" }
						modifier = { add = 0 has_planet_flag = "cold_zone" }
						modifier = { factor = 0.00 planet_size < 12 }
						modifier = { factor = 2.00 planet_size > 17 planet_size < 23 }
						modifier = { factor = 1.50 planet_size > 14 planet_size < 20 is_moon = yes }
						modifier = { factor = 0.33 solar_system = { any_system_planet = { has_planet_flag = "marginal_world" }}}
						modifier = { factor = 0.00 solar_system = { any_system_planet = { is_planet_class = orbit_sulfur }}}
					}
					0 = {
						roll_redux = yes
						set_planet_flag = "marginal_world"
						modifier = { add = 0 has_planet_flag = "hot_zone" }
						modifier = { add = 0 has_planet_flag = "warm_eco_zone" }
						modifier = { add = 0 has_planet_flag = "temperate_eco_zone" }
						modifier = { add = 2 has_planet_flag = "cool_eco_zone" }
						modifier = { add = 1 has_planet_flag = "cold_zone" }
						modifier = { factor = 0.00 planet_size < 12 }
						modifier = { factor = 2.00 planet_size > 17 planet_size < 23 }
						modifier = { factor = 1.50 planet_size > 14 planet_size < 20 is_moon = yes }
						modifier = { factor = 0.33 solar_system = { any_system_planet = { has_planet_flag = "marginal_world" }}}
						modifier = { factor = 0.00 solar_system = { any_system_planet = { is_planet_class = orbit_redux }}}
					}
					0 = {
						roll_alkali = yes
						set_planet_flag = "marginal_world"
						modifier = { add = 1 has_planet_flag = "hot_zone" }
						modifier = { add = 2 has_planet_flag = "warm_eco_zone" }
						modifier = { add = 0 has_planet_flag = "temperate_eco_zone" }
						modifier = { add = 0 has_planet_flag = "cool_eco_zone" }
						modifier = { add = 0 has_planet_flag = "cold_zone" }
						modifier = { factor = 0.00 planet_size < 12 }
						modifier = { factor = 2.00 planet_size > 17 planet_size < 23 }
						modifier = { factor = 1.50 planet_size > 14 planet_size < 20 is_moon = yes }
						modifier = { factor = 0.33 solar_system = { any_system_planet = { has_planet_flag = "marginal_world" }}}
						modifier = { factor = 0.00 solar_system = { any_system_planet = { is_planet_class = orbit_alkali }}}
					}
					0 = {
						roll_desolate = yes
						set_planet_flag = "marginal_world"
						modifier = { add = 2 has_planet_flag = "hot_zone" }
						modifier = { add = 1 has_planet_flag = "warm_eco_zone" }
						modifier = { add = 0 has_planet_flag = "temperate_eco_zone" }
						modifier = { add = 1 has_planet_flag = "cool_eco_zone" }
						modifier = { add = 2 has_planet_flag = "cold_zone" }
						modifier = { factor = 0.00 planet_size < 12 }
						modifier = { factor = 2.00 planet_size > 17 planet_size < 23 }
						modifier = { factor = 1.50 planet_size > 14 planet_size < 20 is_moon = yes }
						modifier = { factor = 0.33 solar_system = { any_system_planet = { has_planet_flag = "marginal_world" }}}
						modifier = { factor = 0.00 solar_system = { any_system_planet = { is_planet_class = orbit_desolate }}}
					}
				}
			}
			# For the remaining, start with atmosphere-type
			if = {
				limit = { is_planet_class = ph_super_terran	NOT = { has_planet_flag = "planet_converted" } }
				spawn_super_terran_atmosphere = yes
			}
			if = {
				limit = { is_planet_class = ph_terran NOT = { has_planet_flag = "planet_converted" } }
				spawn_terran_atmosphere = yes
			}
			if = {
				limit = { is_planet_class = ph_dwarf NOT = { has_planet_flag = "planet_converted" } }
				spawn_dwarf_atmosphere = yes
			}
			# Convert planet class
			if = {
				limit = { is_planet_class = ph_super_terran	}
				convert_super_terran = yes
				# Spawn random modifiers and deposits
				if = {
					limit = { OR = { has_standard_orbital_deposit = yes has_deposit = no } NOT = { solar_system = { has_star_flag = "empire_home_system" } } }
					clear_deposits = yes
					spawn_uninhabitable_features = yes
				}
			}
			if = {
				limit = { is_planet_class = ph_terran	}
				convert_terran = yes
				# Spawn random modifiers and deposits
				if = {
					limit = { OR = { has_standard_orbital_deposit = yes has_deposit = no } NOT = { solar_system = { has_star_flag = "empire_home_system" } } }
					clear_deposits = yes
					spawn_uninhabitable_features = yes
				}
			}
			if = {
				limit = { is_planet_class = ph_dwarf	}
				convert_dwarf = yes
				# Spawn random modifiers and deposits
				if = {
					limit = { OR = { has_standard_orbital_deposit = yes has_deposit = no } NOT = { solar_system = { has_star_flag = "empire_home_system" } } }
					clear_deposits = yes
					spawn_uninhabitable_features = yes
				}			
			}
			# Add features and balance deposits to uninhabitables manually defined in the initializers
			if = {
				limit = { is_orbit_rocky_uninhabitable = yes NOT = { has_planet_flag = "planet_converted" } }
				random_list = {
					0 = {
						add_modifier = {
							modifier = "atmosphere-airless"
							days = -1
						}
						modifier  = { add = 1  is_planet_class = orbit_icy }
						modifier  = { add = 1  is_planet_class = orbit_chthonian }
						modifier  = { add = 1  is_planet_class = orbit_iron_telluric }
						modifier  = { add = 1  is_planet_class = pc_barren_cold}
					}
					0 = {
						add_modifier = {
							modifier = "atmosphere-thin"
							days = -1
						}
						modifier  = { add = 1  is_planet_class = pc_barren}
						modifier  = { add = 1  is_planet_class = orbit_volcanic_telluric }
						modifier  = { add = 1  is_planet_class = pc_frozen }
						modifier  = { add = 1  is_planet_class = pc_molten }
					}
					0 = {
						add_modifier = {
							modifier = "atmosphere-greenhouse"
							days = -1
						}
						modifier  = { add = 1  is_planet_class = orbit_hothouse_toxic }
						modifier  = { add = 1  is_planet_class = pc_toxic}
						modifier  = { add = 1  is_planet_class = orbit_carbonyl_toxic }
						modifier  = { add = 1  is_planet_class = orbit_water_panthalassic }
						modifier  = { add = 1  is_planet_class = orbit_ammonia_panthalassic }
						modifier  = { add = 1  is_planet_class = orbit_methane_panthalassic }
					}
				}
				if = {
					limit = { NOT = { solar_system = { has_star_flag = "empire_home_system" } } }
					spawn_uninhabitable_features = yes
				}
			}
			if = {
				limit = { is_orbit_giant_uninhabitable = yes NOT = { has_planet_flag = "planet_converted" } }
				clear_deposits = yes
				spawn_giant_features = yes
			}

			planet_event = { id = atw_engine.04 days = 1 } # Eliminate a random number of planets from each non capital star system, affected by player choice
			planet_event = { id = atw_engine.05 days = 2 } # Convert placeholder classes - Stage 3, extra low habitables and terraforming candidates
		}
	}
	
}

planet_event = {
	id = atw_engine.02
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		owner = {
			has_trait = trait_aquatic
		}
		is_ocean_replacement = yes
	}

	immediate = {
		if = {
			limit = { is_planet_class = pc_ocean }
			set_planet_entity = { picture = pc_aquatic_uw }
		}
		if = {
			limit = { is_planet_class = pc_desert }
			set_planet_entity = { picture = pc_aquatichot_uw }
		}
		if = {
			limit = { is_planet_class = pc_arctic }
			set_planet_entity = { picture = pc_aquaticcold_uw }
		}
	}
}

planet_event = {
	id = atw_engine.04 # ERASE RANDOM WORLDS
	hide_window = yes
	is_triggered_only = yes
	#fire_only_once = yes
	
	immediate = {
		if = {
			limit = { has_planet_flag = "erasable" }
			
			if = {
				limit = { is_moon = yes } # Remove moon, or not
				random_list = {
					8 = {
						remove_planet = yes
						modifier = { factor = 0.10 has_global_flag = "very_high_expectations" }
						modifier = { factor = 0.50 has_global_flag = "high_expectations" }
						modifier = { factor = 2.00 has_global_flag = "low_expectations" }
						modifier = { factor = 3.00 has_global_flag = "very_low_expectations" }
					}
					16 = {
						#Do nothing
						modifier = { factor = 3.00 has_global_flag = "very_high_expectations" }
						modifier = { factor = 1.50 has_global_flag = "high_expectations" }
						modifier = { factor = 0.35 has_global_flag = "low_expectations" }
						modifier = { factor = 0.15 has_global_flag = "very_low_expectations" }
					}
				}
			}
			if = {
				limit = {
					AND = {
						NOT = { is_moon = yes }
						NOT = { is_asteroid = yes }
					}
				}
				if = {
					limit = { has_moon = yes } # Remove planet and all moons, or not
					random_list = {
						1 = {
							every_moon = { remove_planet = yes }
							#if = {
							#	limit = { NOT = { has_moon = yes } }
							#	remove_planet = yes
							#}
							remove_planet = yes
							modifier = { factor = 0.05 has_global_flag = "very_high_expectations" }
							modifier = { factor = 0.25 has_global_flag = "high_expectations" }
							modifier = { factor = 1.25 has_global_flag = "low_expectations" }
							modifier = { factor = 2.00 has_global_flag = "very_low_expectations" }
						}
						15 = {
							#Do nothing
							modifier = { factor = 2.00 has_global_flag = "very_high_expectations" }
							modifier = { factor = 1.25 has_global_flag = "high_expectations" }
							modifier = { factor = 0.50 has_global_flag = "low_expectations" }
							modifier = { factor = 0.25 has_global_flag = "very_low_expectations" }
						}
					}
				}
				if = {
					limit = { NOT = { has_moon = yes } } # Remove planet if no moons exist, or not
					random_list = {
						8 = {
							remove_planet = yes
							modifier = { factor = 0.05 has_global_flag = "very_high_expectations" }
							modifier = { factor = 0.25 has_global_flag = "high_expectations" }
							modifier = { factor = 1.25 has_global_flag = "low_expectations" }
							modifier = { factor = 2.00 has_global_flag = "very_low_expectations" }
						}
						16 = {
							#Do nothing
							modifier = { factor = 2.00 has_global_flag = "very_high_expectations" }
							modifier = { factor = 1.25 has_global_flag = "high_expectations" }
							modifier = { factor = 0.25 has_global_flag = "low_expectations" }
							modifier = { factor = 0.01 has_global_flag = "very_low_expectations" }
						}
					}
				}
			}
			if = {
				limit = { is_asteroid = yes }
				random_list = {
					10 = {
						remove_planet = yes
						modifier = { factor = 0.50 has_global_flag = "very_high_expectations" }
						modifier = { factor = 0.75 has_global_flag = "high_expectations" }
						modifier = { factor = 1.25 has_global_flag = "low_expectations" }
						modifier = { factor = 1.50 has_global_flag = "very_low_expectations" }
					}
					10 = {
						#Do nothing
						modifier = { factor = 1.50 has_global_flag = "very_high_expectations" }
						modifier = { factor = 1.25 has_global_flag = "high_expectations" }
						modifier = { factor = 0.75 has_global_flag = "low_expectations" }
						modifier = { factor = 0.50 has_global_flag = "very_low_expectations" }
						modifier = { factor = 2.50 has_deposit = yes }
					}
				}
			}
		}
		
	}
}

planet_event = {
	id = atw_engine.05 # CONVERT A SMALL AMMOUNT OF UNINHABITABLES INTO LOW HABITABILITY CLASSES AS WELL AS SPAWN TERRAFORMING CANDIDATES
	hide_window = yes
	is_triggered_only = yes
	#fire_only_once = yes
	
	immediate = {
		# Dusty Telluric Terraforming Candidates:
		if = {
			limit = { is_planet_class = pc_barren }
			random_list = {
				0 = {
					# base value depending on star's temperature zone
					modifier = { add = 0 has_modifier = "temperature-scorching" }
					modifier = { add = 5 has_modifier = "temperature-hot" }
					modifier = { add = 10 has_modifier = "temperature-temperate" }
					modifier = { add = 5 has_modifier = "temperature-cold" }
					modifier = { add = 5 has_modifier = "temperature-freezing" }
					# extra bonus conditions
					modifier = { factor = 1.25 planet_size > 13 }
					# modifiers based on star type
					modifier = { factor = 0.75 solar_system = { has_star_flag = "white_dwarf" } }
					modifier = { factor = 1.00 solar_system = { has_star_flag = "red_dwarf" } }
					modifier = { factor = 1.50 solar_system = { has_star_flag = "yellow_star" } }
					modifier = { factor = 1.25 solar_system = { has_star_flag = "white_star" } }
					modifier = { factor = 1.25 solar_system = { has_star_flag = "red_giant" } }
					modifier = { factor = 0.75 solar_system = { has_star_flag = "white_giant" } }
					modifier = { factor = 0.50 solar_system = { has_star_flag = "red_supergiant" } }
					modifier = { factor = 0.25 solar_system = { has_star_flag = "blue_giant" } }
					modifier = { factor = 0.25 solar_system = { has_star_flag = "neutron_star" } }
					modifier = { factor = 0.25 solar_system = { has_star_flag = "pulsar" } }
					modifier = { factor = 0.00 solar_system = { has_star_flag = "black_hole" } }
					# disable on below
					modifier = { factor = 0.00 solar_system = { has_star_flag = "sol_system" } }
					modifier = { factor = 0.00 solar_system = { has_star_flag = "aldebaran_system" } }
					modifier = { factor = 0.00 solar_system = { NOT = { has_star_flag = "atw_edited" } } }
					# final roll based on where inside the temperate zone the planet is
					modifier = { factor = 0.75 has_planet_flag = "warm_eco_zone" }
					modifier = { factor = 1.00 has_planet_flag = "temperate_eco_zone" }
					modifier = { factor = 1.50 has_planet_flag = "cool_eco_zone" }

					add_modifier = {
						modifier = "terraforming_candidate"
						days = -1
					}
				}
				90 = {
					# do nothing
				}
			}
		}
		# Frozen Telluric Terraforming Candidates:
		if = {
			limit = { is_planet_class = pc_frozen }
			random_list = {
				0 = {
					# base value depending on star's temperature zone
					modifier = { add = 0 has_modifier = "temperature-scorching" }
					modifier = { add = 0 has_modifier = "temperature-hot" }
					modifier = { add = 20 has_modifier = "temperature-temperate" }
					modifier = { add = 10 has_modifier = "temperature-cold" }
					modifier = { add = 5 has_modifier = "temperature-freezing" }
					# extra bonus conditions
					modifier = { factor = 1.25 is_moon = yes }
					# modifiers based on star type
					modifier = { factor = 0.75 solar_system = { has_star_flag = "white_dwarf" } }
					modifier = { factor = 1.00 solar_system = { has_star_flag = "red_dwarf" } }
					modifier = { factor = 1.50 solar_system = { has_star_flag = "yellow_star" } }
					modifier = { factor = 1.25 solar_system = { has_star_flag = "white_star" } }
					modifier = { factor = 1.25 solar_system = { has_star_flag = "red_giant" } }
					modifier = { factor = 0.75 solar_system = { has_star_flag = "white_giant" } }
					modifier = { factor = 0.50 solar_system = { has_star_flag = "red_supergiant" } }
					modifier = { factor = 0.25 solar_system = { has_star_flag = "blue_giant" } }
					modifier = { factor = 0.25 solar_system = { has_star_flag = "neutron_star" } }
					modifier = { factor = 0.25 solar_system = { has_star_flag = "pulsar" } }
					modifier = { factor = 0.00 solar_system = { has_star_flag = "black_hole" } }
					# disable on below
					modifier = { factor = 0.00 solar_system = { has_star_flag = "sol_system" } }
					modifier = { factor = 0.00 solar_system = { has_star_flag = "aldebaran_system" } }
					modifier = { factor = 0.00 solar_system = { NOT = { has_star_flag = "atw_edited" } } }
					# final roll based on planet size
					modifier = { factor = 0.00 planet_size < 10 }
					modifier = { factor = 0.75 planet_size > 9 planet_size < 15 }
					modifier = { factor = 1.25 planet_size > 14 planet_size < 21 }
					modifier = { factor = 1.50 planet_size > 20 }

					add_modifier = {
						modifier = "frozen_terraforming_candidate"
						days = -1
					}
				}
				90 = {
					# do nothing
				}
			}
		}
		# Volcanic Telluric Terraforming Candidates:
		if = {
			limit = { is_planet_class = orbit_volcanic_telluric }
			random_list = {
				0 = {
					# base value depending on star's temperature zone
					modifier = { add = 0 has_modifier = "temperature-scorching" }
					modifier = { add = 10 has_modifier = "temperature-hot" }
					modifier = { add = 5 has_modifier = "temperature-temperate" }
					modifier = { add = 0 has_modifier = "temperature-cold" }
					modifier = { add = 0 has_modifier = "temperature-freezing" }
					# extra bonus conditions
					modifier = { factor = 1.25 planet_size > 13 }
					# modifiers based on star type
					modifier = { factor = 0.00 solar_system = { has_star_flag = "white_dwarf" } }
					modifier = { factor = 0.25 solar_system = { has_star_flag = "red_dwarf" } }
					modifier = { factor = 0.50 solar_system = { has_star_flag = "yellow_star" } }
					modifier = { factor = 1.50 solar_system = { has_star_flag = "white_star" } }
					modifier = { factor = 1.00 solar_system = { has_star_flag = "red_giant" } }
					modifier = { factor = 1.25 solar_system = { has_star_flag = "white_giant" } }
					modifier = { factor = 0.75 solar_system = { has_star_flag = "red_supergiant" } }
					modifier = { factor = 0.50 solar_system = { has_star_flag = "blue_giant" } }
					modifier = { factor = 0.00 solar_system = { has_star_flag = "neutron_star" } }
					modifier = { factor = 0.00 solar_system = { has_star_flag = "pulsar" } }
					modifier = { factor = 0.00 solar_system = { has_star_flag = "black_hole" } }
					# disable on below
					modifier = { factor = 0.00 solar_system = { has_star_flag = "sol_system" } }
					modifier = { factor = 0.00 solar_system = { has_star_flag = "aldebaran_system" } }
					modifier = { factor = 0.00 solar_system = { NOT = { has_star_flag = "atw_edited" } } }
					# final roll based on planet size
					modifier = { factor = 0.00 planet_size < 10 }
					modifier = { factor = 1.00 planet_size > 9 planet_size < 15 }
					modifier = { factor = 1.25 planet_size > 14 planet_size < 21 }
					modifier = { factor = 0.50 planet_size > 20 }

					add_modifier = {
						modifier = "toxic_terraforming_candidate"
						days = -1
					}
				}
				90 = {
					# do nothing
				}
			}
		}
		# Hothouse Toxic Terraforming Candidates:
		if = {
			limit = { is_planet_class = orbit_hothouse_toxic }
			random_list = {
				0 = {
					# base value depending on star's temperature zone
					modifier = { add = 0 has_modifier = "temperature-scorching" }
					modifier = { add = 5 has_modifier = "temperature-hot" }
					modifier = { add = 10 has_modifier = "temperature-temperate" }
					modifier = { add = 5 has_modifier = "temperature-cold" }
					modifier = { add = 0 has_modifier = "temperature-freezing" }
					# extra bonus conditions
					modifier = { factor = 1.25 planet_size > 13 }
					# modifiers based on star type
					modifier = { factor = 0.00 solar_system = { has_star_flag = "white_dwarf" } }
					modifier = { factor = 0.75 solar_system = { has_star_flag = "red_dwarf" } }
					modifier = { factor = 1.00 solar_system = { has_star_flag = "yellow_star" } }
					modifier = { factor = 1.25 solar_system = { has_star_flag = "white_star" } }
					modifier = { factor = 1.50 solar_system = { has_star_flag = "red_giant" } }
					modifier = { factor = 1.25 solar_system = { has_star_flag = "white_giant" } }
					modifier = { factor = 1.00 solar_system = { has_star_flag = "red_supergiant" } }
					modifier = { factor = 0.75 solar_system = { has_star_flag = "blue_giant" } }
					modifier = { factor = 0.00 solar_system = { has_star_flag = "neutron_star" } }
					modifier = { factor = 0.00 solar_system = { has_star_flag = "pulsar" } }
					modifier = { factor = 0.00 solar_system = { has_star_flag = "black_hole" } }
					# disable on below
					modifier = { factor = 0.00 solar_system = { has_star_flag = "sol_system" } }
					modifier = { factor = 0.00 solar_system = { has_star_flag = "aldebaran_system" } }
					modifier = { factor = 0.00 solar_system = { NOT = { has_star_flag = "atw_edited" } } }
					# final roll based on where inside the temperate zone the planet is
					modifier = { factor = 1.50 has_planet_flag = "warm_eco_zone" }
					modifier = { factor = 0.75 has_planet_flag = "temperate_eco_zone" }
					modifier = { factor = 0.00 has_planet_flag = "cool_eco_zone" }

					add_modifier = {
						modifier = "toxic_terraforming_candidate"
						days = -1
					}
				}
				90 = {
					# do nothing
				}
			}
		}
		# Methane Toxic Terraforming Candidates:
		if = {
			limit = { is_planet_class = pc_toxic }
			random_list = {
				0 = {
					# base value depending on star's temperature zone
					modifier = { add = 0 has_modifier = "temperature-scorching" }
					modifier = { add = 0 has_modifier = "temperature-hot" }
					modifier = { add = 0 has_modifier = "temperature-temperate" }
					modifier = { add = 10 has_modifier = "temperature-cold" }
					modifier = { add = 15 has_modifier = "temperature-freezing" }
					# extra bonus conditions
					modifier = { factor = 0.25 NOT = { is_moon = yes } }
					# modifiers based on star type
					modifier = { factor = 1.50 solar_system = { has_star_flag = "white_dwarf" } }
					modifier = { factor = 1.50 solar_system = { has_star_flag = "red_dwarf" } }
					modifier = { factor = 1.25 solar_system = { has_star_flag = "yellow_star" } }
					modifier = { factor = 0.75 solar_system = { has_star_flag = "white_star" } }
					modifier = { factor = 1.00 solar_system = { has_star_flag = "red_giant" } }
					modifier = { factor = 0.50 solar_system = { has_star_flag = "white_giant" } }
					modifier = { factor = 0.50 solar_system = { has_star_flag = "red_supergiant" } }
					modifier = { factor = 0.25 solar_system = { has_star_flag = "blue_giant" } }
					modifier = { factor = 0.75 solar_system = { has_star_flag = "neutron_star" } }
					modifier = { factor = 0.75 solar_system = { has_star_flag = "pulsar" } }
					modifier = { factor = 0.50 solar_system = { has_star_flag = "black_hole" } }
					# disable on below
					modifier = { factor = 0.00 solar_system = { has_star_flag = "sol_system" } }
					modifier = { factor = 0.00 solar_system = { has_star_flag = "aldebaran_system" } }
					modifier = { factor = 0.00 solar_system = { NOT = { has_star_flag = "atw_edited" } } }
					# final roll based on planet size
					modifier = { factor = 1.00 planet_size < 10 }
					modifier = { factor = 1.50 planet_size > 9 planet_size < 15 }
					modifier = { factor = 0.25 planet_size > 14 planet_size < 21 }
					modifier = { factor = 0.00 planet_size > 20 }

					add_modifier = {
						modifier = "toxic_terraforming_candidate"
						days = -1
					}
				}
				90 = {
					# do nothing
				}
			}
		}
		# Molten Terraforming Candidates:
		if = {
			limit = { is_planet_class = pc_molten }
			random_list = {
				0 = {
					# base value depending on star's temperature zone
					modifier = { add = 0 has_modifier = "temperature-scorching" }
					modifier = { add = 0 has_modifier = "temperature-hot" }
					modifier = { add = 15 has_modifier = "temperature-temperate" }
					modifier = { add = 0 has_modifier = "temperature-cold" }
					modifier = { add = 0 has_modifier = "temperature-freezing" }
					# extra bonus conditions
					modifier = { factor = 1.25 planet_size > 13 }
					# modifiers based on star type
					modifier = { factor = 0.75 solar_system = { has_star_flag = "white_dwarf" } }
					modifier = { factor = 1.00 solar_system = { has_star_flag = "red_dwarf" } }
					modifier = { factor = 1.50 solar_system = { has_star_flag = "yellow_star" } }
					modifier = { factor = 1.25 solar_system = { has_star_flag = "white_star" } }
					modifier = { factor = 1.25 solar_system = { has_star_flag = "red_giant" } }
					modifier = { factor = 0.75 solar_system = { has_star_flag = "white_giant" } }
					modifier = { factor = 0.50 solar_system = { has_star_flag = "red_supergiant" } }
					modifier = { factor = 0.25 solar_system = { has_star_flag = "blue_giant" } }
					modifier = { factor = 0.25 solar_system = { has_star_flag = "neutron_star" } }
					modifier = { factor = 0.25 solar_system = { has_star_flag = "pulsar" } }
					modifier = { factor = 0.00 solar_system = { has_star_flag = "black_hole" } }
					# disable on below
					modifier = { factor = 0.00 solar_system = { has_star_flag = "sol_system" } }
					modifier = { factor = 0.00 solar_system = { has_star_flag = "aldebaran_system" } }
					modifier = { factor = 0.00 solar_system = { NOT = { has_star_flag = "atw_edited" } } }
					# final roll based on planet size
					modifier = { factor = 0.00 planet_size < 10 }
					modifier = { factor = 0.50 planet_size > 9 planet_size < 15 }
					modifier = { factor = 1.50 planet_size > 14 planet_size < 21 }
					modifier = { factor = 0.50 planet_size > 20 }

					add_modifier = {
						modifier = "toxic_terraforming_candidate"
						days = -1
					}
				}
				90 = {
					# do nothing
				}
			}
		}
		# add low habitability classes later if necessary
		# to-do
	}
}

planet_event = {
	id = atw_engine.06 # UPDATE PLANET CLASS/PORTRAIT AFTER COLONIZING
	hide_window = yes
	is_triggered_only = yes
	#fire_only_once = yes
	
	immediate = {
		colony_update = yes
	}
}

planet_event = {
	id = atw_engine.11 # GENERATE PRIMITIVES
	hide_window = yes
	is_triggered_only = yes
	#fire_only_once = yes
	
	immediate = {
		if = {
			limit = { has_planet_flag = "eco_temp_primitives" }
			generate_primitives_on_temperate_planet = yes
			spawn_planet_deposits = yes
		}
		if = {
			limit = { has_planet_flag = "eco_cold_primitives" }
			generate_primitives_on_cold_planet = yes
			spawn_planet_deposits = yes
		}
		if = {
			limit = { has_planet_flag = "eco_hot_primitives" }
			generate_primitives_on_hot_planet = yes
			spawn_planet_deposits = yes
		}
	}
}

event = {
    id = atw_engine.99 # CALL PROMPT FOR PLANET ODDS
	title = atw_engine.99.name
	desc = atw_engine.99.desc
	picture = GFX_evt_star_chart
	show_sound = event_default
	location = root

	is_triggered_only = yes

	trigger = {
		owner = { is_ai = no }
	}
	
	option = {
		name = atw_engine.99.a
        custom_tooltip = atw_engine.99.a.tooltip
		hidden_effect = {
			set_global_flag = very_high_expectations
		}
		
		
	}
	
	option = {
		name = atw_engine.99.b
        custom_tooltip = atw_engine.99.b.tooltip
		hidden_effect = {
			set_global_flag = high_expectations
		}
	}

	option = {
		name = atw_engine.99.c
        custom_tooltip = atw_engine.99.c.tooltip
		hidden_effect = {
			#do nothing, use default odds
		}
	}
	
	option = {
		name = atw_engine.99.d
        custom_tooltip = atw_engine.99.d.tooltip
		hidden_effect = {
			set_global_flag = low_expectations
		}
	}
	
	option = {
		name = atw_engine.99.e
        custom_tooltip = atw_engine.99.e.tooltip
		hidden_effect = {
			set_global_flag = very_low_expectations
		}
	}

	
}